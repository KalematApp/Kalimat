<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ุงููุฑุขู">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description"
        content="ุฑูููู ูู ุชูุงูุฉ ุงููุฑุขู ุงููุฑูู โ ุชุฏุจูุฑ ูููุฉ ุจูููุฉ ูู ุณูููุฉ ุชุงูุฉุ ุจูุง ุฅุนูุงูุงุช ููุง ุชุชุจูุน. ุตุฏูุฉ ุฌุงุฑูุฉ.">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#0a0a0f">
    <meta name="msapplication-TileImage" content="/icons/icon-144.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-96.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <title>ูููุงุช</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Amiri:wght@400;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <!-- Uthmani Script Fonts -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="sajda-notif" id="sajdaNotif">
        <div class="sajda-icon-container">
            <svg viewBox="0 0 24 24">
                <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14l-4-4 1.41-1.41L11 13.17l5.59-5.58L18 9l-7 7z" />
            </svg>
        </div>
        <h2 style="font-family:'Amiri', serif; color:var(--accent-1); margin:0;">ุณุฌุฏุฉ ุชูุงูุฉ</h2>
        <div style="font-size: 13px; color: var(--text-secondary); margin:10px 0; line-height:1.6; max-width:280px;"
            id="sajdaText">
            <p id="sajdaDua1" style="margin:5px 0;">ุณุฌุฏ ูุฌูู ููุฐู ุฎููู ูุตูุฑูุ ูุดู ุณูุนู ูุจุตุฑู ุจุญููู ูููุชูุ ุชุจุงุฑู ุงููู
                ุฃุญุณู ุงูุฎุงูููู</p>
            <p id="sajdaDua2" style="margin:5px 0; opacity:0.8; display:none;">ุงูููู ุงูุชุจ ูู ุจูุง ุนูุฏู ุฃุฌุฑุงูุ ูุถุน ุนูู ุจูุง
                ููุฒุฑุงูุ ูุงุฌุนููุง ูู ุนูุฏู ุฐุฎุฑุงูุ ูุชูุจููุง ููู ููุง ุชูุจูุชูุง ูู ุนุจุฏู ุฏุงูุฏ</p>
        </div>
        <button onclick="hideSajda()" class="intro-btn"
            style="margin-top:10px; padding:10px 30px; border-radius:15px; font-size:14px; height:auto;">ูุชุงุจุนูุฉ</button>
    </div>

    <div class="ambient-bg" id="ambientBg"></div>
    <button class="focus-exit" id="focusExit"><svg viewBox="0 0 24 24">
            <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
        </svg><span id="exitFocusLabel">ุฎุฑูุฌ</span></button>

    <!-- INTRO SCREEN -->
    <div class="screen intro-screen" id="introScreen">
        <div class="intro-icon"><svg viewBox="0 0 100 100">
                <rect x="20" y="10" width="60" height="80" rx="4" />
                <line x1="32" y1="28" x2="68" y2="28" />
                <line x1="32" y1="45" x2="68" y2="45" />
                <line x1="32" y1="62" x2="68" y2="62" />
                <line x1="32" y1="79" x2="55" y2="79" />
            </svg></div>
        <h1 class="intro-title" id="introTitle">ูููุงุช</h1>
        <p class="intro-subtitle" id="introSubtitle">ุงูุฑุฃ ุงููุฑุขู ูููุฉ ุจูููุฉ ุจุณุฑุนุชูุ ูุน ุชูููุฉ ุงูุชุฑููุฒ ุงูุจุตุฑู ูููุฑุงุกุฉ
            ุงูุณุฑูุนุฉ</p>
        <button class="intro-btn" id="startBtn">ุงุจุฏุฃ</button>
    </div>

    <!-- ONBOARDING SCREEN -->
    <div class="screen intro-screen" id="onboardScreen"
        style="padding:24px 20px;justify-content:flex-start;padding-top:50px;">
        <img src="icons/icon-192.png" alt=""
            style="width:80px;height:80px;border-radius:20px;margin-bottom:24px;box-shadow:0 8px 30px rgba(212,175,55,0.3);">
        <h1 style="font-family:'Amiri',serif;font-size:1.8rem;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:8px;"
            id="onbTitle">ูููุงุช</h1>
        <p style="color:var(--text-secondary);font-size:0.85rem;margin-bottom:30px;" id="onbSub">ุฑูููู ูู ุชูุงูุฉ ุงููุฑุขู
            ุงููุฑูู</p>

        <div id="onbFeatures"
            style="width:100%;max-width:380px;display:flex;flex-direction:column;gap:16px;margin-bottom:36px;">
            <div class="onb-feature">
                <div class="onb-icon">๐</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ูุฑุงุกุฉ ูููุฉ ุจูููุฉ" data-en="Word-by-Word Reading">ูุฑุงุกุฉ ูููุฉ
                        ุจูููุฉ</div>
                    <div class="onb-feat-desc" data-ar="ุงุนุฑุถ ูููุงุช ุงููุฑุขู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุจุงูุณุฑุนุฉ ุงูุชู ุชูุงุณุจู"
                        data-en="Display Quran words one at a time at your own pace">ุงุนุฑุถ ูููุงุช ุงููุฑุขู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู
                        ุจุงูุณุฑุนุฉ ุงูุชู ุชูุงุณุจู</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">โฑ๏ธ</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ุชุญููู ุจุณุฑุนุฉ ุงููุฑุงุกุฉ" data-en="Control Reading Speed">ุชุญููู
                        ุจุณุฑุนุฉ ุงููุฑุงุกุฉ</div>
                    <div class="onb-feat-desc"
                        data-ar="ุงุถุจุท ุงูุณุฑุนุฉ ูู ูฅู ุฅูู ูฆูู ูููุฉ ุจุงูุฏูููุฉ โ ุฃู ูุนูู ุงูุณุฑุนุฉ ุงููุชุบูุฑุฉ"
                        data-en="Adjust from 50 to 600 WPM โ or enable variable speed">ุงุถุจุท ุงูุณุฑุนุฉ ูู ูฅู ุฅูู ูฆูู ูููุฉ
                        ุจุงูุฏูููุฉ โ ุฃู ูุนูู ุงูุณุฑุนุฉ ุงููุชุบูุฑุฉ</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">๐</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ุชูุฑุงุฑ ุงูุขูุงุช ููุญูุธ" data-en="Loop Ayahs for Memorization">ุชูุฑุงุฑ
                        ุงูุขูุงุช ููุญูุธ</div>
                    <div class="onb-feat-desc" data-ar="ุญุฏูุฏ ูุทุงู ุขูุงุช ููุฑูุฑูุง ุชููุงุฆูุงู ูุชุณููู ุงูุญูุธ ูุงููุฑุงุฌุนุฉ"
                        data-en="Set an ayah range and loop automatically for memorization">ุญุฏูุฏ ูุทุงู ุขูุงุช ููุฑูุฑูุง
                        ุชููุงุฆูุงู ูุชุณููู ุงูุญูุธ ูุงููุฑุงุฌุนุฉ</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">๐</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ูุถุน ูููู ูููุงุฑู" data-en="Dark & Light Mode">ูุถุน ูููู ูููุงุฑู
                    </div>
                    <div class="onb-feat-desc" data-ar="ุงุฎุชุฑ ูุง ูุฑูุญ ุนูููู โ ูุน ุญูุธ ุชููุงุฆู ูููุถุน ุงููุฑุงุกุฉ"
                        data-en="Choose what's comfortable โ with automatic bookmark saving">ุงุฎุชุฑ ูุง ูุฑูุญ ุนูููู โ ูุน ุญูุธ
                        ุชููุงุฆู ูููุถุน ุงููุฑุงุกุฉ</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">๐ซ</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ุจูุง ุฅุนูุงูุงุช โ ุจูุง ุชุชุจูุน" data-en="No Ads โ No Tracking">ุจูุง
                        ุฅุนูุงูุงุช โ ุจูุง ุชุชุจูุน</div>
                    <div class="onb-feat-desc" data-ar="ุชุทุจูู ูุฌุงูู ุจุงููุงูู โ ุตุฏูุฉ ุฌุงุฑูุฉ"
                        data-en="Completely free โ an ongoing charity">ุชุทุจูู ูุฌุงูู ุจุงููุงูู โ ุตุฏูุฉ ุฌุงุฑูุฉ</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">๐๏ธ</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ูุถุน ุงูุชุฑููุฒ" data-en="Focus Mode">ูุถุน ุงูุชุฑููุฒ</div>
                    <div class="onb-feat-desc" data-ar="ุดุงุดุฉ ูุงููุฉ ุจุฏูู ุนูุงุตุฑ ุชุดุชุช โ ูููุงุช ููุท"
                        data-en="Full screen with no distractions โ just words">ุดุงุดุฉ ูุงููุฉ ุจุฏูู ุนูุงุตุฑ ุชุดุชุช โ ูููุงุช ููุท</div>
                </div>
            </div>
            <div class="onb-feature">
                <div class="onb-icon">๐</div>
                <div class="onb-text">
                    <div class="onb-feat-title" data-ar="ุงูุฃูุฉ ุชูุฑุฃ ูุนุงู" data-en="The Ummah Reads Together">ุงูุฃูุฉ ุชูุฑุฃ ูุนุงู</div>
                    <div class="onb-feat-desc" data-ar="ุดุงูุฏ ุงููุฑุงุก ุญูู ุงูุนุงูู ูุจุงุดุฑุฉ ุนูู ุงูุฎุฑูุทุฉ"
                        data-en="See readers around the world live on the globe">ุดุงูุฏ ุงููุฑุงุก ุญูู ุงูุนุงูู ูุจุงุดุฑุฉ ุนูู ุงูุฎุฑูุทุฉ</div>
                </div>
            </div>
        </div>

        <button class="intro-btn" id="onbStartBtn" style="padding:16px 60px;font-size:1.1rem;">ุงุจุฏุฃ ุงููุฑุงุกุฉ</button>
        <p style="color:var(--text-muted);font-size:0.7rem;margin-top:16px;text-align:center;" id="onbTip">ุงุถุบุท ุนูู
            ุงูุดุงุดุฉ ููุชุดุบูู ูุงูุฅููุงู โ ุงููุฑ ูุฑุชูู ุนูู ุงูุฃุทุฑุงู ููุชููู</p>
    </div>

    <!-- MAIN APP SCREEN -->
    <div class="screen app-screen" id="appScreen">
        <div class="app-container">
            <div class="top-bar">
                <div class="top-bar-item">
                    <button class="top-bar-btn" id="langSwitchBtn"><svg viewBox="0 0 24 24">
                            <path
                                d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" />
                        </svg></button>
                    <span class="btn-label" id="langLabel">ุงููุบุฉ</span>
                </div>
                <div class="top-bar-center">
                    <div class="top-bar-item">
                        <button class="top-bar-btn" id="pagesBtn"
                            onclick="window.location.href='quran-pages-reader.html'"><svg viewBox="0 0 24 24">
                                <path
                                    d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
                            </svg></button>
                        <span class="btn-label" id="pagesLabel">ุงููุตุญู</span>
                    </div>
                    <div class="top-bar-item">
                        <button class="top-bar-btn" id="focusModeBtn"><svg viewBox="0 0 24 24">
                                <path
                                    d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                            </svg></button>
                        <span class="btn-label" id="fsLabel">ุชุฑููุฒ</span>
                    </div>
                    <div class="top-bar-item">
                        <button class="top-bar-btn" id="ummahBtn"><svg viewBox="0 0 24 24">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />
                            </svg></button>
                        <span class="btn-label" id="ummahLabel">ุงูุฃูุฉ</span>
                    </div>
                </div>
                <div class="top-bar-item">
                    <button class="top-bar-btn" id="themeBtn"><svg viewBox="0 0 24 24">
                            <path
                                d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" />
                        </svg></button>
                    <span class="btn-label" id="themeLabel">ูุงุชุญ</span>
                </div>
            </div>

            <div class="surah-row" style="display: flex; gap: 10px; align-items: flex-end; margin-bottom: 10px;">
                <div class="surah-selector" style="flex: 1; margin: 0; position: relative; padding-top: 20px;">
                    <label for="surahSelect"
                        style="position: absolute; top: 0; right: 0; font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; pointer-events: none; padding: 0 4px;"
                        id="surahSelectLabel">ุงูุณูุฑุฉ</label>
                    <select id="surahSelect" style="margin-top: 0;">
                        <option value="">ุงุฎุชุฑ ุณูุฑุฉ...</option>
                    </select>
                </div>
                <!-- Page Selector Dropdown -->
                <div class="surah-selector" style="flex: 1; margin: 0; position: relative; padding-top: 20px;">
                    <label for="pageSelect"
                        style="position: absolute; top: 0; right: 0; font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; pointer-events: none; padding: 0 4px;"
                        id="pageNumberLabel">ุฑูู ุงูุตูุญุฉ</label>
                    <select id="pageSelect" style="margin-top: 0;">
                        <option value="">--</option>
                    </select>
                </div>
            </div>

            <!-- Gaze Bar Removed (Moved to Bottom) -->

            <div class="word-display" id="wordDisplay" style="position: relative;">
                <div class="interaction-overlay" id="interactionOverlay"
                    style="position: absolute; inset: 0; z-index: 20; display: flex; pointer-events: auto;">
                    <div class="touch-zone side right" id="zoneRight">
                    </div>
                    <div class="touch-zone center" id="zoneCenter">
                        <div class="pause-overlay-icon" id="pauseOverlayIcon" style="display: flex;">
                            <svg viewBox="0 0 24 24" style="width: 40px; height: 40px; fill: white;">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                            </svg>
                        </div>
                    </div>
                    <div class="touch-zone side left" id="zoneLeft">
                    </div>
                </div>
                <div class="focus-container" id="focusContainer">
                    <div class="spritz-frame">
                        <div class="spritz-line spritz-line-top"></div>
                        <div class="spritz-wedge spritz-wedge-top"></div>
                        <div class="current-word size-medium" id="currentWord">ุจูุณููู</div>
                        <div class="spritz-wedge spritz-wedge-bottom"></div>
                        <div class="spritz-line spritz-line-bottom"></div>
                    </div>
                </div>
            </div>

            <!-- Playhead Card: Progress + Controls unified -->
            <div class="playhead-card">
                <div class="progress-track">
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar" id="progressBar"></div>
                        <div class="progress-thumb" id="progressThumb">ูก</div>
                    </div>
                </div>
                <div class="playback-controls" style="direction: rtl !important;">
                    <div class="ctrl-btn-wrap"><button class="ctrl-btn ctrl-btn-md" id="startAyahBtn"><svg
                                viewBox="0 0 24 24">
                                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                            </svg></button><span class="ctrl-btn-label" id="startAyahLabel">ุจุฏุงูุฉ ุงูุขูุฉ</span></div>
                    <div class="ctrl-btn-wrap"><button class="ctrl-btn ctrl-btn-sm" id="skipBackBtn"><svg
                                viewBox="0 0 24 24">
                                <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z" />
                            </svg></button><span class="ctrl-btn-label" id="skipBackLabel">ูกู ูููุงุช</span></div>
                    <div class="ctrl-btn-wrap"><button class="ctrl-btn ctrl-btn-play" id="playBtn"><svg viewBox="0 0 24 24"
                                id="playIcon">
                                <path d="M8 5v14l11-7z" />
                            </svg></button><span class="ctrl-btn-label" id="playLabel">ุชุดุบูู</span></div>
                    <div class="ctrl-btn-wrap"><button class="ctrl-btn ctrl-btn-sm" id="skipFwdBtn"><svg
                                viewBox="0 0 24 24">
                                <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z" />
                            </svg></button><span class="ctrl-btn-label" id="skipFwdLabel">ูกู ูููุงุช</span></div>
                    <div class="ctrl-btn-wrap"><button class="ctrl-btn ctrl-btn-md" id="endAyahBtn"><svg
                                viewBox="0 0 24 24">
                                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                            </svg></button><span class="ctrl-btn-label" id="endAyahLabel">ููุงูุฉ ุงูุขูุฉ</span></div>
                </div>
            </div>

            <!-- Simplified Info Bar -->
            <div class="stats-grid">
                <div class="info-bar">
                    <div class="info-item"><span class="info-label" id="surahLabel">ุงูุณูุฑุฉ</span><span
                            class="info-value" id="surahName">ุงููุงุชุญุฉ</span></div>
                    <div class="info-item"><span class="info-label" id="hizbLabel">ุงูุญุฒุจ</span><span class="info-value"
                            id="hizbNum">ูก</span></div>
                    <div class="info-item"><span class="info-label" id="juzuLabel">ุงูุฌุฒุก</span><span class="info-value"
                            id="juzuNum">ูก</span></div>
                </div>

                <div class="time-estimates">
                    <div class="time-item">
                        <div class="time-label" id="surahTimeLabel">ุจุงูู ููุณูุฑุฉ</div>
                        <div class="time-value" id="surahTime">--</div>
                    </div>
                    <div class="time-item">
                        <div class="time-label" id="quranTimeLabel">ุจุงูู ููุฎุชูุฉ</div>
                        <div class="time-value" id="quranTime">--</div>
                    </div>
                </div>
            </div>

            <!-- Simplified Speed Control: 5 Buttons -->
            <div class="speed-presets-simple"
                style="display: flex; gap: 8px; justify-content: center;">
                <button class="speed-btn-simple" id="speedSlower" data-wpm="100">ุฃุจุทุฃ</button>
                <button class="speed-btn-simple" id="speedSlow" data-wpm="150">ุจุทูุก</button>
                <button class="speed-btn-simple active" id="speedMedium" data-wpm="200">ูุชูุณุท</button>
                <button class="speed-btn-simple" id="speedHigh" data-wpm="300">ุณุฑูุน</button>
                <button class="speed-btn-simple" id="speedFaster" data-wpm="400">ุฃุณุฑุน</button>
            </div>

            <!-- Playback Controls Moved Up -->

            <!-- More Controls Button -->
            <button class="more-controls-btn" id="moreControlsBtn" onclick="toggleMoreControls()">
                <span id="moreControlsLabel">ุงููุฒูุฏ ูู ุงูุชุญูู</span>
                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; transition: transform 0.3s;"
                    id="moreControlsIcon">
                    <path d="M7 10l5 5 5-5z" fill="currentColor" />
                </svg>
            </button>

            <!-- Advanced Controls (Hidden by default) -->
            <div class="advanced-controls" id="advancedControls" style="display: none;">
                <!-- Custom Speed Control Slider -->
                <div class="control-card compact-speed-control"
                    style="margin-top: 10px; margin-bottom: 5px; padding: 10px;">
                    <div class="control-header" style="margin-bottom: 5px; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span id="speedLabel">ุณุฑุนุฉ ุงููุฑุงุกุฉ ุงููุฎุตุตุฉ</span>
                        </div>
                        <div class="speed-adjuster">
                            <button class="adjust-btn" id="decreaseSpeedBtn">-50</button>
                            <span class="control-value" style="min-width: 40px; text-align: center;"><span
                                    id="wpmValue">200</span></span>
                            <button class="adjust-btn" id="increaseSpeedBtn">+50</button>
                        </div>
                    </div>
                    <input type="range" class="speed-slider" id="speedSlider" min="50" max="600" value="200" step="10">
                </div>

                <!-- Variable Speed Control -->
                <div class="control-card" style="margin-top: 10px; margin-bottom: 10px;">
                    <div class="control-header">
                        <span id="variableSpeedLabel">ุณุฑุนุฉ ูุชุบูุฑุฉ</span>
                        <label class="toggle-switch"><input type="checkbox" id="variableSpeedToggle" checked><span
                                class="toggle-slider"></span></label>
                    </div>
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 8px; padding: 0 4px;"
                        id="variableSpeedTip">ููุท ุงููุฑุงุกุฉ ุงูุฅููุงุนู: ุชุจุงุทุค ุชููุงุฆู ุนูุฏ ุงููุฏ ูุนูุงูุงุช ุงูููู</div>
                </div>

                <!-- Tools Grid (Focus + Gaze) -->
                <div class="tools-grid">
                    <div class="tool-item">
                        <div class="tool-header">
                            <span class="tool-title" id="enhancedTitle">ูุถุน ุงูุชุฑููุฒ</span>
                            <div class="toggle-wrapper"><label class="toggle-switch"><input type="checkbox"
                                        id="enhancedToggle" checked><span class="toggle-slider"></span></label></div>
                        </div>
                        <div class="tool-desc" id="enhancedDesc">ุชูููุฒ ููุทุฉ ุงูุชุฑููุฒ</div>
                    </div>

                    <div class="tool-item">
                        <div class="tool-header">
                            <span class="tool-title">ุงูุชุญูู ุจุงููุธุฑ</span>
                            <div class="toggle-wrapper"><label class="toggle-switch"><input type="checkbox"
                                        id="gazeToggle"><span class="toggle-slider"></span></label></div>
                        </div>
                        <div class="gaze-ui-compact">
                            <span id="gazeStatus">ูุบูู</span>
                            <canvas id="gazeCanvas" class="gaze-canvas-micro" width="60" height="15"></canvas>
                        </div>
                        <video id="gazeVideo" class="gaze-video-hidden" playsinline muted autoplay></video>
                    </div>
                </div>

                <div class="font-size-control" style="display: none;">
                    <span class="font-size-label" id="fontSizeLabel">ุญุฌู ุงูุฎุท</span>
                    <div class="font-size-btns">
                        <button class="font-btn active" data-size="small">ุต</button>
                        <button class="font-btn" data-size="medium">ู</button>
                        <button class="font-btn" data-size="large">ู</button>
                        <button class="font-btn" data-size="xlarge">+</button>
                    </div>
                </div>

                <div class="control-card">
                    <div class="control-header"><span id="loopLabel">ุชูุฑุงุฑ ุงูุขูุงุช</span><label
                            class="toggle-switch"><input type="checkbox" id="loopToggle"><span
                                class="toggle-slider"></span></label></div>
                    <div class="loop-control">
                        <div class="loop-range-display"><span id="loopRangeText">ูุทุงู ุงูุชูุฑุงุฑ:</span><span
                                class="loop-range-value" id="loopRangeValue">ูก - ูง</span></div>
                        <div class="loop-slider-container">
                            <div class="loop-slider-row">
                                <span class="loop-slider-label" id="fromLabel">ูู ุงูุขูุฉ</span>
                                <input type="number" class="loop-input" id="loopStartInput" min="1" max="7" value="1">
                                <input type="range" class="speed-slider loop-slider" id="loopStartSlider" min="1"
                                    max="7" value="1">
                            </div>
                            <div class="loop-slider-row">
                                <span class="loop-slider-label" id="toLabel">ุฅูู ุงูุขูุฉ</span>
                                <input type="number" class="loop-input" id="loopEndInput" min="1" max="7" value="7">
                                <input type="range" class="speed-slider loop-slider" id="loopEndSlider" min="1" max="7"
                                    value="7">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-label" id="wordsReadLabel">ูููุงุช ูุฑุฃุชูุง</div>
                        <div class="stat-value" id="wordsRead">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label" id="timeSpentLabel">ููุช ุงููุฑุงุกุฉ</div>
                        <div class="stat-value" id="timeSpent">0:00</div>
                    </div>
                </div>

                <div class="stats-row" style="margin-top:12px;">
                    <div class="stat-item">
                        <div class="stat-label" id="visitorsLabel">ุฒูุงุฑ ุงูุตูุญุฉ</div>
                        <div class="stat-value" id="visitorsCount">--</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label" id="collectiveTimeLabel">ููุช ุงููุฑุงุกุฉ ุงูุฌูุงุนู</div>
                        <div class="stat-value" id="collectiveTime">--</div>
                    </div>
                </div>
            </div>

            <!-- Old Gaze Section Removed -->
        </div>
    </div>

    <!-- โโโ Ummah Globe Screen โโโ -->
    <div class="screen ummah-screen" id="ummahScreen">
        <!-- Referral popup -->
        <div id="refPopup" class="ummah-ref-popup"></div>

        <!-- Scrollable content area -->
        <div class="ummah-scroll-content">
            <!-- โโ Globe Hero (full-width, edge-to-edge) โโ -->
            <div class="ummah-globe-hero">
                <div id="ummahGlobeContainer" class="ummah-globe-container"></div>
                <div class="ummah-globe-fade"></div>

                <!-- Floating top bar (over globe) -->
                <div class="ummah-top-bar">
                    <div class="ummah-top-bar-left">
                        <span class="ummah-top-bar-title">ุงูุฃูุฉ ุชูุฑุฃ</span>
                        <span class="ummah-live-dot"></span>
                        <span class="ummah-live-label" id="ummahLiveLabel">ูุจุงุดุฑ</span>
                    </div>
                    <button class="ummah-close-btn" onclick="closeUmmahScreen()">โ</button>
                </div>

                <!-- Big reader counter โ overlaid at bottom of globe -->
                <div class="ummah-counter-wrap">
                    <div id="ummahCounterBadge" class="ummah-counter-badge">
                        <span id="ummahCounterDot" class="ummah-counter-dot"></span>
                        <span class="ummah-reader-count" id="ummahReaderCount">--</span>
                        <span class="ummah-reading-now" id="ummahReadingNow">ููุฑุฃูู ุงูุขู</span>
                    </div>
                </div>
            </div>

            <!-- โโ Content below globe โโ -->
            <div class="ummah-content">
                <!-- Words mega-stat -->
                <div class="ummah-mega-stat">
                    <div class="ummah-mega-stat-value" id="ummahTotalWords">--</div>
                    <div class="ummah-mega-stat-label" id="ummahWordsLabel">ูููุฉ ูุฑุฃุชูุง ุงูุฃูุฉ ูุนุงู</div>
                </div>

                <!-- Stat row โ 3 pills side by side -->
                <div class="ummah-stats-grid">
                    <div class="ummah-stat-card">
                        <div class="ummah-stat-card-accent" style="background:var(--accent-1);"></div>
                        <div class="ummah-stat-icon" style="color:var(--accent-1);">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                        <div class="ummah-stat-value" id="ummahHours">--</div>
                        <div class="ummah-stat-label">ุณุงุนุฉ</div>
                    </div>
                    <!-- Card 2: Your Reading Time -->
                    <div class="ummah-stat-card">
                        <div class="ummah-stat-card-accent" style="background:#d4af37;"></div>
                        <div class="ummah-stat-icon" style="color:#d4af37;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="ummah-stat-value" id="ummahMyHours">--</div>
                        <div class="ummah-stat-label">ุณุงุนุงุชู</div>
                    </div>
                    <div class="ummah-stat-card">
                        <div class="ummah-stat-card-accent" style="background:#c084fc;"></div>
                        <div class="ummah-stat-icon" style="color:#c084fc;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                            </svg>
                        </div>
                        <div class="ummah-stat-value" id="ummahKhatmas">--</div>
                        <div class="ummah-stat-label">ุฎุชูุฉ</div>
                    </div>
                </div>

                <!-- Live readers section -->
                <div class="ummah-feed-section">
                    <div class="ummah-feed-header">
                        <div class="ummah-feed-header-left">
                            <span class="ummah-feed-dot"></span>
                            <span class="ummah-feed-title" id="ummahFeedTitle">ูุฑุงุก ุงูุขู</span>
                        </div>
                        <span class="ummah-feed-time">ุขุฎุฑ 24 ุณุงุนุฉ</span>
                    </div>
                    <div id="ummahFeed" class="ummah-feed-list"></div>
                    <div id="ummahFeedEmpty" class="ummah-feed-empty">ูุง ููุฌุฏ ูุฑุงุก ูุดุทูู ุงูุขู</div>
                </div>
            </div>
        </div>

        <!-- CTA at bottom (outside scroll) -->
        <div class="ummah-cta-bar">
            <button class="intro-btn ummah-share-btn" id="ummahShareBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                    <polyline points="16 6 12 2 8 6"></polyline>
                    <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
                <span>ุงุฏุนู ุฃุตุฏูุงุกู ูุดุงุฑู ุงูุฃุฌุฑ</span>
            </button>
        </div>
    </div>


    <!-- Privacy Modal -->
    <div id="privacyModal" class="modal-overlay">
        <div class="modal-content">
            <h3>ุชูุจูู ูุงู</h3>
            <p>ูุฐู ุงูููุฒุฉ ุชุฌุฑูุจูุฉ ูุชุนูู ุจุงููุงูู ุนูู ุฌูุงุฒู. ูุง ูุชู ุชุณุฌูู ุฃู ุฅุฑุณุงู ุฃู ุตูุฑ ุฃู ุจูุงูุงุช ูููุงููุฑุง ุฅูู ุฃู ุฎุงุฏู
                ุฎุงุฑุฌู.</p>
            <div class="modal-actions">
                <button id="privacyConfirmBtn" class="modal-btn primary">ููุงูู</button>
                <button id="privacyCancelBtn" class="modal-btn">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Resume Modal -->
    <div id="resumeModal" class="modal-overlay">
        <div class="modal-content">
            <h3>ูุชุงุจุนุฉ ุงููุฑุงุกุฉ</h3>
            <div class="modal-actions column">
                <button id="resumeLastBtn" class="modal-btn primary">ูุชุงุจุนุฉ ูู ุขุฎุฑ ูููุฉ</button>
                <button id="resumeAyahBtn" class="modal-btn">ุจุฏุงูุฉ ุงูุขูุฉ ุงูุญุงููุฉ</button>
                <button id="resumeSurahBtn" class="modal-btn">ุจุฏุงูุฉ ุงูุณูุฑุฉ</button>
            </div>
        </div>
    </div>

    <!-- Pause Overlay -->
    <div id="pauseOverlay" class="pause-overlay">
        <div class="focus-ring-container" id="focusRingContainer">
            <svg class="focus-ring-svg" viewBox="0 0 140 140">
                <circle class="focus-ring-bg" cx="70" cy="70" r="60"></circle>
                <circle id="focusFillRing" class="focus-ring-fill" cx="70" cy="70" r="60"></circle>
            </svg>
            <div class="focus-label" id="focusLabel">ุฑูุฒ ุงููุชุงุจุนุฉ</div>
        </div>
        <div class="overlay-content">
            <div class="overlay-ayah" id="overlayAyah">ุงูุขูุฉ --</div>
            <div class="overlay-stats-grid">
                <div class="o-stat-item"><span class="o-stat-val" id="overlayWords">0</span><span
                        class="o-stat-lbl">ูููุงุช</span></div>
                <div class="o-stat-item"><span class="o-stat-val" id="overlayTime">0:00</span><span
                        class="o-stat-lbl">ููุช</span></div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/topojson-client@3/dist/topojson-client.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script src="js/app.js"></script>

</body>

</html>